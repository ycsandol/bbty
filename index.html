<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>성경 말씀 타자 연습</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 10px; background-color: #f8f9fa; }
        #container { max-width: 700px; margin: auto; text-align: center; padding-top: 120px; }
        #verseTitle { font-size: 18px; font-weight: bold; margin-bottom: 10px; }
        .verseContainer { margin-bottom: 20px; text-align: left; background: white; padding: 10px; border-radius: 10px; box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1); }
        .verseNumber { font-weight: bold; margin-right: 10px; }
        .verseText { padding: 0 5px; display: block; }
        .verseText, .verseInput { font-size: 18px; margin-bottom: 5px; white-space: pre-line; flex: 1; width: calc(100% - 12px); }
        .verseInput { padding: 5px; height: auto; min-height: 50px; line-height: 1.5; font-family: Arial, sans-serif; border: 1px solid #ccc; border-radius: 5px; }
        .correct { color: green; }
        .incorrect { color: red; }
        .completed { pointer-events: none; background-color: #e0e0e0; }
        
        /* 고정 상단 스타일 */
        #header { position: fixed; top: 0; left: 0; width: 100%; background-color: white; padding: 20px 0; z-index: 10; border-bottom: 1px solid #ccc; box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1); }
        #header h1, #header #verseTitle { margin: 0; }
        #header h1 { margin-bottom: 10px; }
        #header #verseTitle { margin-top: 10px; }

        /* 완료 메시지 스타일 */
        #completionMessage {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="header">
        <h1>성경 말씀 타자 연습</h1>
        <p id="verseTitle">[누가복음 11장 1 - 13]</p>
    </div>

    <div id="container">
        <div id="verseDisplay"></div>
    </div>

    <div id="completionMessage">
        <h2>축하합니다!</h2>
        <p id="customMessage"></p>
        <p id="timeTaken"></p>
        <button onclick="closeMessage()">닫기</button>
    </div>

    <script>
        const verses = [
        "예수께서 한 곳에서 기도하시고 마치시매 제자 중 하나가 여짜오되 주여 요한이 자기 제자들에게 기도를 가르친 것과 같이 우리에게도 가르쳐 주옵소서",
        "예수께서 이르시되 너희는 기도할 때에 이렇게 하라 아버지여 이름이 거룩히 여김을 받으시오며 나라가 임하시오며",
        "우리에게 날마다 일용할 양식을 주시옵고",
        "우리가 우리에게 죄 지은 모든 사람을 용서하오니 우리 죄도 사하여 주시옵고 우리를 시험에 들게 하지 마시옵소서 하라",
        "또 이르시되 너희 중에 누가 벗이 있는데 밤중에 그에게 가서 말하기를 벗이여 떡 세 덩이를 내게 꾸어 달라",
        "내 벗이 여행중에 내게 왔으나 내가 먹일 것이 없노라 하면",
        "그가 안에서 대답하여 이르되 나를 괴롭게 하지 말라 문이 이미 닫혔고 아이들이 나와 함께 침실에 누웠으니 일어나 네게 줄 수가 없노라 하겠느냐",
        "내가 너희에게 말하노니 비록 벗 됨으로 인하여서는 일어나서 주지 아니할지라도 그 간청함을 인하여 일어나 그 요구대로 주리라",
        "내가 또 너희에게 이르노니 구하라 그러면 너희에게 주실 것이요 찾으라 그러면 찾아낼 것이요 문을 두드리라 그러면 너희에게 열릴 것이니",
        "구하는 이마다 받을 것이요 찾는 이는 찾아낼 것이요 두드리는 이에게는 열릴 것이니라",
        "너희 중에 아버지 된 자로서 누가 아들이 생선을 달라 하는데 생선 대신에 뱀을 주며",
        "알을 달라 하는데 전갈을 주겠느냐",
        "너희가 악할지라도 좋은 것을 자식에게 줄 줄 알거든 하물며 너희 하늘 아버지께서 구하는 자에게 성령을 주시지 않겠느냐 하시니라"
    ];
        
        const verseDisplay = document.getElementById("verseDisplay");
        let startTime = null;
        let completedVerses = 0;
        
        verses.forEach((verse, index) => {
            const verseContainer = document.createElement("div");
            verseContainer.classList.add("verseContainer");
            
            const verseNumber = document.createElement("span");
            verseNumber.classList.add("verseNumber");
            verseNumber.textContent = `${index + 1}절`;
            
            const verseText = document.createElement("div");
            verseText.classList.add("verseText");
            verseText.innerHTML = verse.split('').map(c => `<span>${c}</span>`).join('');
            
            const inputField = document.createElement("textarea");
            inputField.classList.add("verseInput");
            inputField.setAttribute("data-index", index);
            inputField.placeholder = "이 절을 입력하세요...";
            inputField.rows = "2";
            inputField.addEventListener("input", function(event) {
                if (!startTime) startTime = new Date();
                checkTyping(event);
            });
            inputField.addEventListener("keypress", function(event) {
                if (event.key === "Enter") {
                    event.preventDefault();
                    moveToNextInput(index);
                    scrollUp(index);
                }
            });
            
            verseContainer.appendChild(verseNumber);
            verseContainer.appendChild(verseText);
            verseContainer.appendChild(inputField);
            verseDisplay.appendChild(verseContainer);
        });
        
        function checkTyping(event) {
            const inputField = event.target;
            const index = parseInt(inputField.getAttribute("data-index"));
            const expectedText = verses[index];
            const userInput = inputField.value;
            let formattedText = "";
            
            for (let i = 0; i < expectedText.length; i++) {
                if (i < userInput.length) {
                    if (userInput[i] === expectedText[i]) {
                        formattedText += `<span class='correct'>${expectedText[i]}</span>`;
                    } else {
                        formattedText += `<span class='incorrect'>${expectedText[i]}</span>`;
                    }
                } else {
                    formattedText += expectedText[i];
                }
            }
            
            inputField.previousSibling.innerHTML = formattedText;
            
            if (userInput === expectedText) {
                inputField.classList.add("completed");
                inputField.setAttribute("readonly", "true");
                completedVerses++;
                if (completedVerses === verses.length) {
                    showCompletionMessage();
                }
            } 
        }
        
        function moveToNextInput(currentIndex) {
            if (currentIndex < verses.length - 1) {
                document.querySelectorAll(".verseInput")[currentIndex + 1].focus();
            }
        }

        function scrollUp(currentIndex) {
            const verses = document.querySelectorAll(".verseContainer");
            if (currentIndex < verses.length - 1) {
                verses[currentIndex].scrollIntoView({ behavior: "smooth", block: "start" });
            }
        }

        function showCompletionMessage() {
            const endTime = new Date();
            const elapsedTime = (endTime - startTime) / 1000;
            const minutes = Math.floor(elapsedTime / 60);
            const seconds = (elapsedTime % 60).toFixed(2);
            document.getElementById("customMessage").textContent = "3/11/2025";
            document.getElementById("timeTaken").textContent = `완료 시간: ${minutes}분 ${seconds}초`;
            document.getElementById("completionMessage").style.display = "block";
        }

        function closeMessage() {
            document.getElementById("completionMessage").style.display = "none";
        }
    </script>
</body>
</html>
